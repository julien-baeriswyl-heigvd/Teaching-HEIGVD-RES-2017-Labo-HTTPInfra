<VirtualHost *:80>
    ServerName demo.res.ch

    #ErrorLog ${APACHE_LOG_DIR}/error.log
    #CustomLog ${APACHE_LOG_DIR}/access.log combined
    
    <Proxy "balancer://staticapp">
        BalancerMember "http://${static_app}"
    </Proxy>
    
    <Proxy "balancer://dynamicapp">
        BalancerMember "http://${dynamic_app}"
    </Proxy>

    <Location /balancer-manager>
        SetHandler balancer-manager
    </Location>
    
    ProxyPass        /balancer-manager       !
    
    ProxyPass        "/api/" "balancer://dynamicapp/api/"
    ProxyPassReverse "/api/" "balancer://dynamicapp/api/"

    ProxyPass        "/" "balancer://staticapp/"
    ProxyPassReverse "/" "balancer://staticapp/"
</VirtualHost>


